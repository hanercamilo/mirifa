var zt=Object.defineProperty;var $t=(r,n,l)=>n in r?zt(r,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[n]=l;var Q=(r,n,l)=>($t(r,typeof n!="symbol"?n+"":n,l),l);import{c as Bt,A as ue,r as s,j as e,u as Vt,N as Je,$ as Dt,F as I,f as Pt,g as It,h as Lt,V as qt,i as Rt,d as Ut,e as _t}from"./index-Cfzuxuk1.js";import{u as Mt}from"./sSite-DJQJ7LAU.js";import{a as xe,u as Ke}from"./sSession-BvUv9zsA.js";import{D as W}from"./dialog-CK8NdMSH.js";import{b as Ze,d as et,F as tt,B as Ht,N as Ot,S as j,a as Gt}from"./odata-2CVUwsId.js";import{c as de}from"./concatenateErrors-CCuSbzXI.js";/* empty css              */import{u as Qt}from"./sTicket-BrkIp7bC.js";import"./gestionarBadge-CyfLsFJC.js";const Wt=Bt()((r,n)=>({totalCount:0,count:0,value:[],setTicketsAdminData:(l,g,c)=>(r(f=>({...f,totalCount:l,count:g,value:c.value})),n(),Promise.resolve()),cleanTicketsAdmin:async()=>{r(l=>({...l,totalCount:0,count:0,value:[]}),!1)}})),Xt=async({...r})=>{var E;const n=Ze(r.filter),l={...et,table:"odata/GetBoletasPlataforma",filter:n?`?$filter=${n}`:"",topCount:n?"&$count=true":`?$count=true&$top=${r.pageSize}&$skip=${r.currentPage*r.pageSize}`},g=`${l.table}${l.select}${l.expand}${l.filter}${l.apply}${l.orderBy}${l.topCount}`;var f=await tt(r.token,g,"Boletas_Plataforma");const w=f,T={value:f};return await r.setTicketsAdminData(((E=w[0])==null?void 0:E.count)??0,T.value.length,T),f};class Jt{constructor(n){Q(this,"total");Q(this,"cantidad");Q(this,"value");this.total=n.total,this.cantidad=n.cantidad,this.value=n.value}}const ce=async({...r})=>{const n=Ze(r.filter),l={...et,table:"odata/Clientes",filter:n?`?$filter=${n}`:"",topCount:n?"&$count=true":"?$count=true",orderBy:"&$orderBy=nombre asc"},g=`${l.table}${l.select}${l.expand}${l.filter}${l.apply}${l.topCount}${l.orderBy}`,c=await tt(r.token,g,"Clientes_Listar"),f=c,w=c["@odata.count"];return new Jt({total:f.value.length,cantidad:w,value:f.value})},Kt=async(r,n,l)=>{const c=(await xe.post(`${ue}/api/Boletas/${r}/Vender`,{ClienteTelefono:n},{headers:{accept:"text/plain","Content-Type":"application/json",Authorization:l,Permiso:"Boletas_Actualizar"}})).data;return console.log(c),c},Ye=({...r})=>{const[n,l]=s.useState(""),[g,c]=s.useState(!1),f=s.useRef(null);s.useEffect(()=>{const u=r.options.find(N=>N.telefono===r.value);l(u?`${u.telefono} / ${u.nombre}`:"")},[r.value,r.options]),s.useEffect(()=>{n==""&&r.setValue("")},[n]);const w=r.options.filter(u=>u.telefono.toLowerCase().includes(n.toLowerCase())||u.nombre.toLowerCase().includes(n.toLowerCase())),T=u=>{r.setValue(u.telefono),l(`${u.telefono} / ${u.nombre}`),c(!1)},E=u=>{l(u.target.value),c(!0)},U=u=>{f.current&&!f.current.contains(u.target)&&c(!1)};return s.useEffect(()=>(document.addEventListener("mousedown",U),()=>{document.removeEventListener("mousedown",U)}),[]),e.jsxs("div",{className:r.divAddCss,ref:f,children:[e.jsx("div",{className:"flex items-center justify-between mt-0",children:e.jsx("div",{className:`flex justify-start items-center gap-2 text-lg ${r.labelAddCss}`,children:e.jsxs("div",{className:"font-bold tracking-wide text-sm "+(r.required&&r.value===""?"text-red-600 dark:text-red-500":""),children:[r.labelText,r.required?" *":""]})})}),e.jsxs("div",{className:"mt-2 flex justify-between w-[100%] relative",children:[e.jsx("input",{type:"text",className:"pl-2 w-full text-md py-2 border-b border-gray-300 focus:outline-none focus:border-indigo-500 mb-2",placeholder:"Filtrar y seleccionar opción",value:n,onChange:E,onFocus:()=>c(!0)}),g&&e.jsx("div",{className:"absolute top-full left-0 w-full z-50 max-h-60 overflow-y-auto "+(r.value===""?"bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700":""),children:w.length===0&&r.value==""?e.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700",children:"No hay clientes con este criterio"}):w.map((u,N)=>e.jsxs("div",{className:"p-2 cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 bg-white dark:bg-gray-800  border border-gray-300 dark:border-gray-700",onClick:()=>T(u),children:[u.telefono," ",u.id>0?"/":""," ",u.nombre]},N))})]})]})},Yt=async(r,n,l,g)=>{const f=(await xe.post(`${ue}/api/Boletas/${r}/Abonar`,{ClienteTelefono:n,ValorAbono:l},{headers:{accept:"text/plain","Content-Type":"application/json",Authorization:g,Permiso:"Boletas_Actualizar"}})).data;return console.log(f),f},Zt=async(r,n,l)=>{const c=(await xe.post(`${ue}/api/Boletas/${r}/Separar`,{ClienteTelefono:n},{headers:{accept:"text/plain","Content-Type":"application/json",Authorization:l,Permiso:"Boletas_Actualizar"}})).data;return console.log(c),c};function ea(){const[r,n]=s.useState(0),[l,g]=s.useState(0),[c,f]=s.useState(5),[w,T]=s.useState(""),[E,U]=s.useState(!1),u=10,{totalCount:N,count:fe,value:X,setTicketsAdminData:at}=Wt(t=>({totalCount:t.totalCount,count:t.count,value:t.value,setTicketsAdminData:t.setTicketsAdminData??(async(o,x,h)=>Promise.resolve())})),{cleanTickets:J}=Qt(t=>t),[K,me]=s.useState({numero:"",clienteTelefono:""}),[Y,ge]=s.useState({numero:"",clienteTelefono:""}),[_,he]=s.useState({numero:"",clienteTelefono:"",abono:0}),[A,be]=s.useState([]),[st,pe]=s.useState([]),[lt,ye]=s.useState([]),[rt,ve]=s.useState([]),{setManagementVisited:ot}=Mt(t=>({setManagementVisited:t.setManagementVisited})),i=Ke(t=>t),[nt,it]=s.useState(!0),[dt,je]=s.useState(!0);s.useEffect(()=>{M=Math.ceil((A.length!=0?1:N)/c),console.log(M)},[A]);let M=Math.ceil((A.length!=0?1:N)/c);const F=Math.floor(l/u)*u,ct=Math.min(F+u,M),ut=["Boletas","Administrar","Listar boletas"],xt=Ke(t=>t.permisos),Z=t=>xt.findIndex(o=>o==t)>0,[z,ke]=s.useState(""),[C,we]=s.useState(""),[$,Ne]=s.useState(""),[B,Ae]=s.useState(""),[V,Ce]=s.useState(""),[D,Se]=s.useState(""),[P,Te]=s.useState(""),[ft,ee]=s.useState(!1),[mt,Ee]=s.useState(!0),[te,Fe]=s.useState(!0),gt=["","Disponible","Pagada","Abonada","Sin Asignar","Separada"],{showDialog:ze,setShowDialog:ht}=Vt(t=>({showDialog:t.showDialog,setShowDialog:t.setShowDialog})),[$e,ae]=s.useState(!1),[H,se]=s.useState(!1),[L,le]=s.useState(!1),[O,re]=s.useState(!1),bt={Disponible:"bg-blue-200 dark:bg-blue-700",Pagada:"bg-green-200 dark:bg-green-700",Abonada:"bg-red-100 dark:bg-red-600",SinAsignar:"bg-gray-100 dark:bg-gray-800",Separada:"bg-purple-100 dark:bg-purple-700","":"bg-gray-100 dark:bg-gray-700"},[b,S]=s.useState(""),[m,k]=s.useState(""),[q,oe]=s.useState(0),[Be,ne]=s.useState();s.useEffect(()=>(ze==!1&&(ae(!1),se(!1),le(!1),re(!1)),()=>{}),[ze]);const pt=()=>{ae(!0)},yt=t=>{me({numero:t.numero,clienteTelefono:""}),k("");let o=[];o.push({key:"estadoRegistro",value:"Activo",type:"string",contains:!1}),pe(o),se(!0)},vt=t=>{ge({numero:t.numero,clienteTelefono:""}),k("");let o=[];o.push({key:"estadoRegistro",value:"Activo",type:"string",contains:!1}),ye(o),re(!0)},jt=t=>{he({numero:t.numero,clienteTelefono:t.clienteTelefono,abono:0}),k(t.clienteTelefono);let o=[];o.push({key:"estadoRegistro",value:"Activo",type:"string",contains:!1}),ve(o),le(!0)};s.useEffect(()=>{S(K.numero),k(""),setTimeout(()=>{if(H&&K.numero!=null){const t={pageSize:c,token:i.token,filter:st};try{(async()=>{const x=await ce({...t});ne(x.value)})()}catch(o){o.message==="Forbidden"&&i.setAuthorized(!1),o.message==="Unauthorized"&&i.setTokenValid(!1),o.message}}},100)},[H,K]),s.useEffect(()=>{S(Y.numero),k(""),setTimeout(()=>{if(O&&Y.numero!=null){const t={pageSize:c,token:i.token,filter:lt};try{(async()=>{const x=await ce({...t});ne(x.value)})()}catch(o){o.message==="Forbidden"&&i.setAuthorized(!1),o.message==="Unauthorized"&&i.setTokenValid(!1),o.message}}},100)},[O,Y]),s.useEffect(()=>{S(_.numero),k(_.clienteTelefono),oe(0),setTimeout(()=>{if(L&&_.numero!=""){const t={pageSize:c,token:i.token,filter:rt};try{(async()=>{const x=await ce({...t});ne(x.value)})()}catch(o){o.message==="Forbidden"&&i.setAuthorized(!1),o.message==="Unauthorized"&&i.setTokenValid(!1),o.message}}},100)},[L,_]);const[kt,wt]=s.useState(!0),ie=t=>{g(t)};s.useEffect(()=>((async()=>{try{je(!0);const o={currentPage:l,pageSize:c,token:i.token,filter:A,setTicketsAdminData:at};await Xt({...o}),je(!1)}catch(o){o.message==="Forbidden"&&i.setAuthorized(!1),o.message==="Unauthorized"&&i.setTokenValid(!1),o.message}})(),()=>{}),[l,c,i.token,A,r]),s.useEffect(()=>()=>{},[X]);const Nt=t=>{g(0),f(parseInt(t.target.value))},At=t=>{T(t.target.value)};s.useEffect(()=>{z!=""||C!=""||$!=""||B!=""||V!=""||D!=""||P!=""?(ee(!0),Ee(!1)):(ee(!1),Ee(!0))},[z,C,$,B,V,D,P]),s.useEffect(()=>{b==""||m==""||L&&q<=0?Fe(!0):Fe(!1)},[b,m,q]);const Ve=()=>{ke(""),we(""),Ne(""),Ae(""),Ce(""),Se(""),Te(""),S(""),k(""),oe(0),be([]),pe([]),ye([]),ve([]),ee(!1),ae(!1),se(!1),re(!1),le(!1),me({numero:"",clienteTelefono:""}),ge({numero:"",clienteTelefono:""}),he({numero:"",clienteTelefono:"",abono:0}),ht(!1)},Ct=async()=>{let t=[];return z&&t.push({key:"boleta/numero",value:z,type:"string",contains:!1}),C&&t.push({key:"boleta/estado",value:C=="Sin Asignar"?"SinAsignar":C,type:"string",contains:!1}),$&&t.push({key:"boleta/abonos",value:$,type:"number",contains:!1}),B&&t.push({key:"boleta/fechaActualizacion",value:B,type:"string",contains:!1}),V&&t.push({key:"boleta/clienteTelefono",value:V,type:"string",contains:!0}),D&&t.push({key:"boleta/clienteNombre",value:D,type:"string",contains:!0}),P&&t.push({key:"boleta/usuarioAlias",value:P,type:"string",contains:!0}),be(t),""},St=()=>{console.log("Filtro aplicado:",w),U(!1)},Tt=async()=>{var o,x,h,p,y,v,a;if(b.length!=2)return"El número de la boleta no es válido.";if(m.length!=10)return"El teléfono del cliente debe ser un número de 10 dígitos.";try{var t=m.includes(" ")?m.split(" ")[0]:m;const d=await Kt(b,t,i.token);return console.log(d),d.data.errors==null?(n(G=>G+1),""):d.data!=""&&d.data!=null&&!((o=d.data)!=null&&o.errors)?d.data:de(d)}catch(d){return((x=d==null?void 0:d.response)==null?void 0:x.status)===403&&i.setAuthorized(!1),((h=d==null?void 0:d.response)==null?void 0:h.status)===401&&i.setTokenValid(!1),(p=d==null?void 0:d.response)==null||p.status,(y=d==null?void 0:d.response)==null||y.status,console.error("Error durante el registro de la compra de la boleta:",d),"Error durante el registro de la compra de la boleta: "+(((a=(v=d==null?void 0:d.response)==null?void 0:v.data)==null?void 0:a.errors)??"")}},Et=async()=>{var o,x,h,p,y,v;if(b.length!=2)return"El número de la boleta no es válido.";if(m.length!=10)return"El teléfono del cliente debe ser un número de 10 dígitos.";try{var t=m.includes(" ")?m.split(" ")[0]:m;const a=await Zt(b,t,i.token);return console.log(a),a.data.errors==null?(n(d=>d+1),""):a.data!=""&&a.data!=null&&!((o=a.data)!=null&&o.errors)?a.data:de(a)}catch(a){return((x=a==null?void 0:a.response)==null?void 0:x.status)===403&&i.setAuthorized(!1),((h=a==null?void 0:a.response)==null?void 0:h.status)===401&&i.setTokenValid(!1),(p=a==null?void 0:a.response)==null||p.status,console.error("Error durante la separación de la boleta:",a),"Error durante la separación de la boleta: "+(((v=(y=a==null?void 0:a.response)==null?void 0:y.data)==null?void 0:v.errors)??"")}},Ft=async()=>{var o,x,h,p,y,v;if(b.length!=2)return"El número de la boleta no es válido.";if(m.length!=10)return"El teléfono del cliente debe ser un número de 10 dígitos.";if(q<=0)return"El valor del abono debe ser mayor a 0.";try{var t=m.includes(" ")?m.split(" ")[0]:m;const a=await Yt(b,t,q,i.token);return console.log(a),a.data.errors==null?(n(d=>d+1),""):a.data!=""&&a.data!=null&&!((o=a.data)!=null&&o.errors)?a.data:de(a)}catch(a){return((x=a==null?void 0:a.response)==null?void 0:x.status)===403&&i.setAuthorized(!1),((h=a==null?void 0:a.response)==null?void 0:h.status)===401&&i.setTokenValid(!1),(p=a==null?void 0:a.response)==null||p.status,console.error("Error durante el registro del abono de la boleta:",a),"Error durante el registro del abono de la boleta: "+(((v=(y=a==null?void 0:a.response)==null?void 0:y.data)==null?void 0:v.errors)??"")}};return s.useEffect(()=>{i.token?i.authorized||(ot("/administracion/inicio"),it(!1)):wt(!1)},[i]),kt?nt?e.jsxs("div",{className:"",children:[e.jsx("header",{className:"bg-indigo-50 dark:bg-gray-800 mb-4 rounded-lg p-2 ml-0 max-w-full h-14",children:e.jsxs("div",{className:"ml-2 mx-auto flex justify-start",children:[e.jsx("a",{className:"text-2xl font-bold tracking-tight text-indigo-600",children:"Gestión de boletas"}),dt&&e.jsx("div",{className:"align-middle -mt-0 -ml-8",children:e.jsx(Dt,{width:"80",color:"#4F46E5"})})]})}),fe>0||A.length==0?e.jsx("div",{className:"w-full justify-center",children:e.jsxs("section",{className:"container px-4",id:"section2",children:[e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx(Ht,{childs:ut},"breadCrumb"),e.jsxs("div",{className:"flex items-center gap-x-3",children:[e.jsxs("span",{className:"px-3 py-1 text-sm text-blue-600 bg-blue-100 rounded-full font-bold dark:bg-gray-800 dark:text-blue-400",children:["Items: ",fe," / ",N]}),A.length==0&&e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"cursor-pointer block appearance-none bg-white border border-gray-300 dark:bg-gray-800 dark:border-gray-700 text-gray-700 dark:text-gray-300 py-2 pl-3 pr-10 rounded-md leading-tight focus:outline-none focus:border-blue-300 dark:focus:border-blue-700 hover:border-blue-400",value:c,onChange:Nt,children:[e.jsx("option",{value:"5",children:"5 registros"}),e.jsx("option",{value:"25",children:"25 registros"}),e.jsx("option",{value:"50",children:"50 registros"})]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300",children:e.jsx(I,{icon:Pt,className:"text-gray-400 "})})]})]})]}),E&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto  h-full min-h-full w-screen flex justify-center justify-items-center align-middle m-auto",children:e.jsxs("div",{className:"flex justify-end min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-950 opacity-80"})}),e.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsx("div",{className:"sm:flex sm:items-start",children:e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left",children:[e.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",id:"modal-title",children:"Filtrar Usuarios"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"text",placeholder:"Ingrese filtro...",className:"w-full py-2 px-3 border border-gray-300 rounded-md mb-2 focus:outline-none focus:border-blue-500 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600",value:w,onChange:At}),e.jsx("button",{onClick:St,className:"w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 focus:outline-none focus:bg-blue-600",children:"Aplicar Filtro"})]})]})})})})]})}),e.jsx("div",{className:"flex flex-col mt-6",children:e.jsx("div",{className:"-mx-4 -my-2 sm:-mx-6 lg:-mx-8 ",children:e.jsx("div",{className:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8 ",children:e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 ",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 shadow-lg rounded-2xl z-40",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 rounded-2xl",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"py-3.5 px-4 text-sm  text-left rtl:text-right text-gray-500 dark:text-gray-400 w-1/6",children:e.jsx("div",{className:"flex items-center gap-x-0",children:e.jsx("span",{children:"Número"})})}),e.jsx("th",{scope:"col",className:"px-5 py-3.5 text-sm  text-left rtl:text-right text-gray-500 dark:text-gray-400 w-1/6",children:e.jsx("div",{className:"flex items-center gap-x-2",children:e.jsx("span",{children:"Estado"})})}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm  text-left rtl:text-right text-gray-500 dark:text-gray-400 w-1/6",children:"Abonos"}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400 min-w-48",children:"Fecha Actualización"}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400 w-1/6",children:"Cliente"}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400 w-1/6",children:"Usuario"}),e.jsx("th",{scope:"col",className:"relative text-sm px-6 py-3 text-gray-500 dark:text-gray-400 w-1/6",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y dark:bg-gray-900 divide-gray-200 dark:divide-gray-700 rounded-2xl",children:X&&X.map((t,o)=>{var x,h,p,y,v,a,d,G,De,Pe,Ie,Le,qe,Re,Ue,_e,Me,He,Oe,Ge,Qe,We,Xe;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap w-1/6",children:e.jsx("div",{className:"flex justify-center ",children:e.jsx("div",{className:"ml-0 ",children:e.jsx("div",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-400 text-center",children:(x=t.boleta)==null?void 0:x.numero})})})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap w-1/6",children:e.jsx("span",{className:"px-2 py-0.5 text-xs cursor-default rounded-full "+bt[((h=t.boleta)==null?void 0:h.estado)||""],children:((p=t.boleta)==null?void 0:p.estado)=="SinAsignar"?"Sin Asignar":(y=t.boleta)==null?void 0:y.estado})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 w-1/6",children:(a=(v=t.boleta)==null?void 0:v.abonos)==null?void 0:a.toLocaleString("en-US",{style:"currency",currency:"USD"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 w-1/6 text-center",children:e.jsx("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap w-30 cursor-default",title:(d=t.boleta)==null?void 0:d.fechaActualizacion,children:(G=t.boleta)==null?void 0:G.fechaActualizacion})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 min-w-60",children:e.jsx("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap w-60 cursor-default",title:""+((De=t.boleta)==null?void 0:De.clienteTelefono)+((Pe=t.boleta)!=null&&Pe.clienteTelefono?" / ":"")+((Ie=t.boleta)==null?void 0:Ie.clienteNombre),children:""+((Le=t.boleta)==null?void 0:Le.clienteTelefono)+((qe=t.boleta)!=null&&qe.clienteTelefono?" / ":"")+((Re=t.boleta)==null?void 0:Re.clienteNombre)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 w-1/6",children:e.jsx("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap w-20 cursor-default",children:(Ue=t.boleta)==null?void 0:Ue.usuarioAlias})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium w-1/6",children:[Z("Boletas_Actualizar")&&((_e=t.boleta)==null?void 0:_e.estado)=="Disponible"&&(((Me=t.boleta)==null?void 0:Me.usuarioAlias)==i.alias||i.permisos.find(R=>R=="Administrador"))&&e.jsx("a",{onClick:()=>yt({...t.boleta}),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-blue-200 cursor-pointer ml-3",title:"Vender boleta",children:e.jsx(I,{icon:It})}),Z("Boletas_Actualizar")&&((He=t.boleta)==null?void 0:He.estado)=="Disponible"&&(((Oe=t.boleta)==null?void 0:Oe.usuarioAlias)==i.alias||i.permisos.find(R=>R=="Administrador"))&&e.jsx("a",{onClick:()=>vt({...t.boleta}),className:"text-yellow-600 hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-blue-200 cursor-pointer ml-3",title:"Separar boleta",children:e.jsx(I,{icon:Lt})}),Z("Boletas_Actualizar")&&(((Ge=t.boleta)==null?void 0:Ge.estado)=="Abonada"||((Qe=t.boleta)==null?void 0:Qe.estado)=="Separada")&&(((We=t.boleta)==null?void 0:We.usuarioAlias)==i.alias||i.permisos.find(R=>R=="Administrador"))&&((Xe=t.boleta)==null?void 0:Xe.abonos)<=qt&&e.jsx("a",{onClick:()=>jt({...t.boleta}),className:"text-pink-600 hover:text-pink-900 dark:text-pink-400 dark:hover:text-blue-200 cursor-pointer ml-3",title:"Abonar boleta",children:e.jsx(I,{icon:Rt})})]})]},o+"."+t)})})]})})})})}),e.jsx("div",{className:"flex justify-center mb-10 mt-5 z-40",children:e.jsx("nav",{"aria-label":"Page navigation example",children:e.jsxs("ul",{className:"flex items-center -space-x-px h-8 text-sm",children:[e.jsx("li",{children:e.jsxs("a",{href:"#",onClick:()=>ie(l-1),className:`flex items-center justify-center px-3 h-8 ms-0 leading-tight text-gray-500 bg-white border border-e-0 border-gray-300 rounded-s-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white ${l===0?"pointer-events-none opacity-50":""}`,children:[e.jsx("span",{className:"sr-only",children:"Previous"}),e.jsx("svg",{className:"w-2.5 h-2.5 rtl:rotate-180","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 1 1 5l4 4"})})]})}),[...Array(ct-F).keys()].map(t=>e.jsx("li",{children:e.jsx("a",{href:"#",onClick:()=>ie(F+t),className:`flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white ${l===F+t?"font-bold text-indigo-700 dark:text-indigo-500":""}`,children:F+t+1})},F+t)),e.jsx("li",{children:e.jsxs("a",{href:"#",onClick:()=>ie(l+1),className:`flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 rounded-e-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white ${l===M-1?"pointer-events-none opacity-50":""}`,children:[e.jsx("span",{className:"sr-only",children:"Next"}),e.jsx("svg",{className:"w-2.5 h-2.5 rtl:rotate-180","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 9 4-4-4-4"})})]})})]})})}),e.jsx("div",{className:"fixed right-0 z-30 size-11 flex justify-center justify-items-center align-middle m-auto top-[50%]",children:e.jsx("button",{onClick:()=>pt(),className:"bg-blue-500 dark:bg-blue-700 hover:bg-blue-700 dark:hover:bg-blue-800 text-white font-bold py-2 px-4 rounded-l-xl focus:outline-none focus:shadow-outline cursor-pointer",title:"Filtrar",children:e.jsx(I,{icon:Ut})})})]})}):e.jsx("div",{className:"w-full justify-center",children:e.jsx(Ot,{clearFilters:Ve})}),$e&&e.jsx(W,{titulo:"Filtrar información de boletas",status:$e,onAccept:Ct,hasErrors:mt,children:e.jsx("div",{className:"z-40 flex justify-center flex-auto flex-wrap w-full",children:e.jsxs("div",{className:"max-w-sm h-80 z-40",children:[e.jsx("h3",{className:"text-justify",children:"Escribe al menos una palabra en algun campo para inciar una búsqueda."}),e.jsxs("div",{className:"w-full h-full",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{className:"mt-5  rounded-md h-10 w-[9em] "+(ft?"bg-indigo-600 text-white cursor-pointer hover:bg-indigo-700":"bg-gray-400 text-white cursor-default"),onClick:Ve,children:[e.jsx(I,{icon:_t,className:"mr-2"}),"Limpiar filtros"]})}),e.jsxs("form",{autoComplete:"off",children:[e.jsx(j,{name:"nu.mero",hasFocus:!0,type:"number",labelText:"# de Boleta",value:z,setValue:ke,divAddCss:"mt-10",labelAddCss:z?"text-indigo-600":"text-gray-600 dark:text-gray-400"},"nu.mero"),e.jsx(Gt,{name:"estado",hasFocus:!1,labelText:"Estado de la boleta",value:C,setValue:we,options:gt,labelAddCss:C?"text-indigo-600":"text-gray-600 dark:text-gray-400",divAddCss:"mt-10"},"estado"),e.jsx(j,{name:"abonos",hasFocus:!1,labelText:"Valor total de abonos",type:"number",value:$,setValue:Ne,labelAddCss:$?"text-indigo-600":"text-gray-600 dark:text-gray-400",divAddCss:"mt-10"},"abonos"),e.jsx(j,{name:"fechaActualizacion",hasFocus:!1,labelText:"Fecha último abono (AAAA-MM-DD)",value:B,setValue:Ae,labelAddCss:B?"text-indigo-600":"text-gray-600 dark:text-gray-400",divAddCss:"mt-10"},"fechaActualizacion"),e.jsx(j,{name:"clienteTelefono",hasFocus:!1,type:"number",labelText:"Teléfono del cliente",value:V,setValue:Ce,divAddCss:"mt-10",labelAddCss:V?"text-indigo-600":"text-gray-600 dark:text-gray-400"},"clienteTelefono"),e.jsx(j,{name:"clienteNombre",hasFocus:!1,labelText:"Nombre del cliente",value:D,setValue:Se,divAddCss:"mt-10",labelAddCss:D?"text-indigo-600":"text-gray-600 dark:text-gray-400"},"clienteNombre"),e.jsx(j,{name:"usuarioAlias",hasFocus:!1,labelText:"Usuario asignado",value:P,setValue:Te,divAddCss:"mt-10",labelAddCss:P?"text-indigo-600":"text-gray-600 dark:text-gray-400"},"usuarioAlias"),e.jsx("div",{className:"h-20"})]})]})]})})},2),H&&e.jsx(W,{titulo:"Vender una boleta a un cliente",status:H,onAccept:Tt,hasErrors:te,children:e.jsx("div",{className:"z-40 flex justify-start flex-auto flex-wrap w-full",children:e.jsxs("div",{className:"h-80 z-40 w-full",children:[e.jsx("h3",{className:"text-justify",children:"Completa el registro para vender la boleta."}),e.jsxs("div",{className:"mt-10 w-full",children:[e.jsx(j,{disabled:!0,hasFocus:!1,labelText:"Número de la boleta",required:!0,title:"Campo obligatorio",labelAddCss:"text-gray-400",name:"boletaEditNumero",setValue:S,value:b,inputAddCss:"text-indigo-600 dark:text-indigo-400 font-bold"},"boletaNumero"),e.jsx(Ye,{hasFocus:!0,labelText:"Seleccionar el cliente",name:"selectCliente",options:Be||[],value:m,setValue:k,required:!0,divAddCss:"mt-10"},"selectCliente")]}),e.jsx("div",{className:"h-20"})]})})},1),O&&e.jsx(W,{titulo:"Separar boleta a un cliente",status:O,onAccept:Et,hasErrors:te,children:e.jsx("div",{className:"z-40 flex justify-start flex-auto flex-wrap w-full",children:e.jsxs("div",{className:"h-80 z-40 w-full",children:[e.jsx("h3",{className:"text-justify",children:"Completa el registro para separar la boleta."}),e.jsxs("div",{className:"mt-10 w-full",children:[e.jsx(j,{disabled:!0,required:!0,title:"Campo obligatorio",hasFocus:!1,labelText:"Número de la boleta",labelAddCss:"text-gray-400",name:"boletaEditNumero",setValue:S,value:b,inputAddCss:"text-indigo-600 dark:text-indigo-400 font-bold"},"soletaNumero"),e.jsx(Ye,{hasFocus:!0,labelText:"Seleccionar el cliente",name:"selectCliente",options:Be||[],value:m,setValue:k,required:!0,divAddCss:"mt-10"},"sselectCliente")]}),e.jsx("div",{className:"h-20"})]})})},1),L&&e.jsx(W,{titulo:"Abonar a boleta de un cliente",status:L,onAccept:Ft,hasErrors:te,children:e.jsx("div",{className:"z-40 flex justify-start flex-auto flex-wrap w-full",children:e.jsxs("div",{className:"h-80 z-40 w-full",children:[e.jsx("h3",{className:"text-justify",children:"Completa el registro para abonar a la boleta."}),e.jsxs("div",{className:"mt-10 w-full",children:[e.jsx(j,{disabled:!0,hasFocus:!1,required:!0,title:"Campo obligatorio",labelText:"Número de la boleta",labelAddCss:"text-gray-400",name:"boletaEditNumero",setValue:S,value:b,inputAddCss:"text-indigo-600 dark:text-indigo-400 font-bold"},"aboletaNumero"),e.jsx(j,{disabled:!0,hasFocus:!1,labelText:"Teléfono del cliente asociado a la boleta",labelAddCss:"text-gray-400",required:!0,title:"Campo obligatorio",name:"aCliente",setValue:k,value:m,divAddCss:"mt-10 z-40",inputAddCss:"text-indigo-800 dark:text-indigo-400 font-bold"},"aCliente"),e.jsx(j,{disabled:!1,hasFocus:!0,labelText:"Valor del abono",required:!0,title:"Campo obligatorio",name:"boletaEditAbono",setValue:oe,value:q,type:"text",divAddCss:"mt-10 z-40",inputAddCss:"text-indigo-800 dark:text-white font-bold"},"valorAbono")]}),e.jsx("div",{className:"h-20"})]})})},1)]}):e.jsx(Je,{to:"/administracion/inicio"}):e.jsx(Je,{to:"/ingresar"})}const ta=()=>e.jsx("div",{className:"w-full justify-center flex flex-wrap flex-auto",children:e.jsx(ea,{},"ticketsAdmin")}),fa=()=>e.jsx(e.Fragment,{children:e.jsx(ta,{})});export{fa as default};
