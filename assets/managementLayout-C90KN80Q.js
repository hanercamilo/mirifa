import{r as s,m as P,j as o,F as H,M as We,O as Ye,w as Je,A as Ze,u as et,Q as tt,C as rt,J as ce,t as nt,T as at,U as st,l as lt,E as it}from"./index-Cfzuxuk1.js";import{d as M,w as Ae,h as Z,U as $,y as A,T as ot,o as C,x as xe,u as D,j as k,C as L,I as ee,z as Le,i as ne,m as N,r as Oe,k as ut,p as ae,n as ct,A as dt,D as mt,g as G,_ as ft,M as Ne,E as Be,F as pt,f as he,s as J,G as z,l as Ue,H as Se,X as vt,B as gt,v as Ee,q as xt}from"./logOut-Dq_nQc0O.js";import{H as ht}from"./heartIcon-DuQaCFHa.js";import{u as bt}from"./sSite-DJQJ7LAU.js";import{a as yt,u as ke}from"./sSession-BvUv9zsA.js";import{D as It}from"./dialog-CK8NdMSH.js";/* empty css              */import{C as Q,c as Ct}from"./concatenateErrors-CCuSbzXI.js";import{b as wt}from"./back1-B4Qlpzmz.js";import"./sUsers-DzS8fCGq.js";import"./gestionarBadge-CyfLsFJC.js";function Pe(e){var t;if(e.type)return e.type;let r=(t=e.as)!=null?t:"button";if(typeof r=="string"&&r.toLowerCase()==="button")return"button"}function _e(e,t){let[r,n]=s.useState(()=>Pe(e));return M(()=>{n(Pe(e))},[e.type,e.as]),M(()=>{r||t.current&&t.current instanceof HTMLButtonElement&&!t.current.hasAttribute("type")&&n("button")},[r,t]),r}function Re(e){return[e.screenX,e.screenY]}function jt(){let e=s.useRef([-1,-1]);return{wasMoved(t){let r=Re(t);return e.current[0]===r[0]&&e.current[1]===r[1]?!1:(e.current=r,!0)},update(t){e.current=Re(t)}}}function Nt({container:e,accept:t,walk:r,enabled:n=!0}){let i=s.useRef(t),a=s.useRef(r);s.useEffect(()=>{i.current=t,a.current=r},[t,r]),M(()=>{if(!e||!n)return;let u=Ae(e);if(!u)return;let l=i.current,c=a.current,m=Object.assign(b=>l(b),{acceptNode:l}),p=u.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,m,!1);for(;p.nextNode();)c(p.currentNode)},[e,n,i,a])}function St(e){throw new Error("Unexpected object: "+e)}var F=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(F||{});function Et(e,t){let r=t.resolveItems();if(r.length<=0)return null;let n=t.resolveActiveIndex(),i=n??-1;switch(e.focus){case 0:{for(let a=0;a<r.length;++a)if(!t.resolveDisabled(r[a],a,r))return a;return n}case 1:{for(let a=i-1;a>=0;--a)if(!t.resolveDisabled(r[a],a,r))return a;return n}case 2:{for(let a=i+1;a<r.length;++a)if(!t.resolveDisabled(r[a],a,r))return a;return n}case 3:{for(let a=r.length-1;a>=0;--a)if(!t.resolveDisabled(r[a],a,r))return a;return n}case 4:{for(let a=0;a<r.length;++a)if(t.resolveId(r[a],a,r)===e.id)return a;return n}case 5:return null;default:St(e)}}var Te;let kt=(Te=P.startTransition)!=null?Te:function(e){e()};var Pt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Pt||{}),Rt=(e=>(e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.LinkPanel=4]="LinkPanel",e[e.UnlinkPanel=5]="UnlinkPanel",e))(Rt||{});let Tt={0:e=>({...e,disclosureState:D(e.disclosureState,{0:1,1:0})}),1:e=>e.disclosureState===1?e:{...e,disclosureState:1},4(e){return e.linkedPanel===!0?e:{...e,linkedPanel:!0}},5(e){return e.linkedPanel===!1?e:{...e,linkedPanel:!1}},2(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},3(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}}},be=s.createContext(null);be.displayName="DisclosureContext";function ye(e){let t=s.useContext(be);if(t===null){let r=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,ye),r}return t}let Ie=s.createContext(null);Ie.displayName="DisclosureAPIContext";function He(e){let t=s.useContext(Ie);if(t===null){let r=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,He),r}return t}let Ce=s.createContext(null);Ce.displayName="DisclosurePanelContext";function Dt(){return s.useContext(Ce)}function Ft(e,t){return D(t.type,Tt,e,t)}let $t=s.Fragment;function Mt(e,t){let{defaultOpen:r=!1,...n}=e,i=s.useRef(null),a=A(t,ot(f=>{i.current=f},e.as===void 0||e.as===s.Fragment)),u=s.useRef(null),l=s.useRef(null),c=s.useReducer(Ft,{disclosureState:r?0:1,linkedPanel:!1,buttonRef:l,panelRef:u,buttonId:null,panelId:null}),[{disclosureState:m,buttonId:p},b]=c,x=C(f=>{b({type:1});let S=Ae(i);if(!S||!p)return;let d=f?f instanceof HTMLElement?f:f.current instanceof HTMLElement?f.current:S.getElementById(p):S.getElementById(p);d==null||d.focus()}),h=s.useMemo(()=>({close:x}),[x]),v=s.useMemo(()=>({open:m===0,close:x}),[m,x]),g={ref:a};return P.createElement(be.Provider,{value:c},P.createElement(Ie.Provider,{value:h},P.createElement(xe,{value:D(m,{0:k.Open,1:k.Closed})},L({ourProps:g,theirProps:n,slot:v,defaultTag:$t,name:"Disclosure"}))))}let At="button";function Lt(e,t){let r=ee(),{id:n=`headlessui-disclosure-button-${r}`,...i}=e,[a,u]=ye("Disclosure.Button"),l=Dt(),c=l===null?!1:l===a.panelId,m=s.useRef(null),p=A(m,t,c?null:a.buttonRef),b=Le();s.useEffect(()=>{if(!c)return u({type:2,buttonId:n}),()=>{u({type:2,buttonId:null})}},[n,u,c]);let x=C(d=>{var y;if(c){if(a.disclosureState===1)return;switch(d.key){case N.Space:case N.Enter:d.preventDefault(),d.stopPropagation(),u({type:0}),(y=a.buttonRef.current)==null||y.focus();break}}else switch(d.key){case N.Space:case N.Enter:d.preventDefault(),d.stopPropagation(),u({type:0});break}}),h=C(d=>{switch(d.key){case N.Space:d.preventDefault();break}}),v=C(d=>{var y;Oe(d.currentTarget)||e.disabled||(c?(u({type:0}),(y=a.buttonRef.current)==null||y.focus()):u({type:0}))}),g=s.useMemo(()=>({open:a.disclosureState===0}),[a]),f=_e(e,m),S=c?{ref:p,type:f,onKeyDown:x,onClick:v}:{ref:p,id:n,type:f,"aria-expanded":a.disclosureState===0,"aria-controls":a.linkedPanel?a.panelId:void 0,onKeyDown:x,onKeyUp:h,onClick:v};return L({mergeRefs:b,ourProps:S,theirProps:i,slot:g,defaultTag:At,name:"Disclosure.Button"})}let Ot="div",Bt=Z.RenderStrategy|Z.Static;function Ut(e,t){let r=ee(),{id:n=`headlessui-disclosure-panel-${r}`,...i}=e,[a,u]=ye("Disclosure.Panel"),{close:l}=He("Disclosure.Panel"),c=Le(),m=A(t,a.panelRef,v=>{kt(()=>u({type:v?4:5}))});s.useEffect(()=>(u({type:3,panelId:n}),()=>{u({type:3,panelId:null})}),[n,u]);let p=ne(),b=p!==null?(p&k.Open)===k.Open:a.disclosureState===0,x=s.useMemo(()=>({open:a.disclosureState===0,close:l}),[a,l]),h={ref:m,id:n};return P.createElement(Ce.Provider,{value:a.panelId},L({mergeRefs:c,ourProps:h,theirProps:i,slot:x,defaultTag:Ot,features:Bt,visible:b,name:"Disclosure.Panel"}))}let _t=$(Mt),Ht=$(Lt),zt=$(Ut),de=Object.assign(_t,{Button:Ht,Panel:zt}),De=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function Fe(e){var t,r;let n=(t=e.innerText)!=null?t:"",i=e.cloneNode(!0);if(!(i instanceof HTMLElement))return n;let a=!1;for(let l of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))l.remove(),a=!0;let u=a?(r=i.innerText)!=null?r:"":n;return De.test(u)&&(u=u.replace(De,"")),u}function Vt(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let r=e.getAttribute("aria-labelledby");if(r){let n=r.split(" ").map(i=>{let a=document.getElementById(i);if(a){let u=a.getAttribute("aria-label");return typeof u=="string"?u.trim():Fe(a).trim()}return null}).filter(Boolean);if(n.length>0)return n.join(", ")}return Fe(e).trim()}function qt(e){let t=s.useRef(""),r=s.useRef("");return C(()=>{let n=e.current;if(!n)return"";let i=n.innerText;if(t.current===i)return r.current;let a=Vt(n).trim().toLowerCase();return t.current=i,r.current=a,a})}var Kt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Kt||{}),Qt=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Qt||{}),Gt=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(Gt||{});function me(e,t=r=>r){let r=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,n=pt(t(e.items.slice()),a=>a.dataRef.current.domRef.current),i=r?n.indexOf(r):null;return i===-1&&(i=null),{items:n,activeItemIndex:i}}let Xt={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,t)=>{var r;let n=me(e),i=Et(t,{resolveItems:()=>n.items,resolveActiveIndex:()=>n.activeItemIndex,resolveId:a=>a.id,resolveDisabled:a=>a.dataRef.current.disabled});return{...e,...n,searchQuery:"",activeItemIndex:i,activationTrigger:(r=t.trigger)!=null?r:1}},3:(e,t)=>{let r=e.searchQuery!==""?0:1,n=e.searchQuery+t.value.toLowerCase(),i=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+r).concat(e.items.slice(0,e.activeItemIndex+r)):e.items).find(u=>{var l;return((l=u.dataRef.current.textValue)==null?void 0:l.startsWith(n))&&!u.dataRef.current.disabled}),a=i?e.items.indexOf(i):-1;return a===-1||a===e.activeItemIndex?{...e,searchQuery:n}:{...e,searchQuery:n,activeItemIndex:a,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{let r=me(e,n=>[...n,{id:t.id,dataRef:t.dataRef}]);return{...e,...r}},6:(e,t)=>{let r=me(e,n=>{let i=n.findIndex(a=>a.id===t.id);return i!==-1&&n.splice(i,1),n});return{...e,...r,activationTrigger:1}}},we=s.createContext(null);we.displayName="MenuContext";function se(e){let t=s.useContext(we);if(t===null){let r=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,se),r}return t}function Wt(e,t){return D(t.type,Xt,e,t)}let Yt=s.Fragment;function Jt(e,t){let{__demoMode:r=!1,...n}=e,i=s.useReducer(Wt,{__demoMode:r,menuState:r?0:1,buttonRef:s.createRef(),itemsRef:s.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:a,itemsRef:u,buttonRef:l},c]=i,m=A(t);ut([l,u],(h,v)=>{var g;c({type:1}),dt(v,mt.Loose)||(h.preventDefault(),(g=l.current)==null||g.focus())},a===0);let p=C(()=>{c({type:1})}),b=s.useMemo(()=>({open:a===0,close:p}),[a,p]),x={ref:m};return P.createElement(we.Provider,{value:i},P.createElement(xe,{value:D(a,{0:k.Open,1:k.Closed})},L({ourProps:x,theirProps:n,slot:b,defaultTag:Yt,name:"Menu"})))}let Zt="button";function er(e,t){var r;let n=ee(),{id:i=`headlessui-menu-button-${n}`,...a}=e,[u,l]=se("Menu.Button"),c=A(u.buttonRef,t),m=ae(),p=C(g=>{switch(g.key){case N.Space:case N.Enter:case N.ArrowDown:g.preventDefault(),g.stopPropagation(),l({type:0}),m.nextFrame(()=>l({type:2,focus:F.First}));break;case N.ArrowUp:g.preventDefault(),g.stopPropagation(),l({type:0}),m.nextFrame(()=>l({type:2,focus:F.Last}));break}}),b=C(g=>{switch(g.key){case N.Space:g.preventDefault();break}}),x=C(g=>{if(Oe(g.currentTarget))return g.preventDefault();e.disabled||(u.menuState===0?(l({type:1}),m.nextFrame(()=>{var f;return(f=u.buttonRef.current)==null?void 0:f.focus({preventScroll:!0})})):(g.preventDefault(),l({type:0})))}),h=s.useMemo(()=>({open:u.menuState===0}),[u]),v={ref:c,id:i,type:_e(e,u.buttonRef),"aria-haspopup":"menu","aria-controls":(r=u.itemsRef.current)==null?void 0:r.id,"aria-expanded":u.menuState===0,onKeyDown:p,onKeyUp:b,onClick:x};return L({ourProps:v,theirProps:a,slot:h,defaultTag:Zt,name:"Menu.Button"})}let tr="div",rr=Z.RenderStrategy|Z.Static;function nr(e,t){var r,n;let i=ee(),{id:a=`headlessui-menu-items-${i}`,...u}=e,[l,c]=se("Menu.Items"),m=A(l.itemsRef,t),p=ct(l.itemsRef),b=ae(),x=ne(),h=x!==null?(x&k.Open)===k.Open:l.menuState===0;s.useEffect(()=>{let d=l.itemsRef.current;d&&l.menuState===0&&d!==(p==null?void 0:p.activeElement)&&d.focus({preventScroll:!0})},[l.menuState,l.itemsRef,p]),Nt({container:l.itemsRef.current,enabled:l.menuState===0,accept(d){return d.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:d.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(d){d.setAttribute("role","none")}});let v=C(d=>{var y,R;switch(b.dispose(),d.key){case N.Space:if(l.searchQuery!=="")return d.preventDefault(),d.stopPropagation(),c({type:3,value:d.key});case N.Enter:if(d.preventDefault(),d.stopPropagation(),c({type:1}),l.activeItemIndex!==null){let{dataRef:j}=l.items[l.activeItemIndex];(R=(y=j.current)==null?void 0:y.domRef.current)==null||R.click()}Be(l.buttonRef.current);break;case N.ArrowDown:return d.preventDefault(),d.stopPropagation(),c({type:2,focus:F.Next});case N.ArrowUp:return d.preventDefault(),d.stopPropagation(),c({type:2,focus:F.Previous});case N.Home:case N.PageUp:return d.preventDefault(),d.stopPropagation(),c({type:2,focus:F.First});case N.End:case N.PageDown:return d.preventDefault(),d.stopPropagation(),c({type:2,focus:F.Last});case N.Escape:d.preventDefault(),d.stopPropagation(),c({type:1}),G().nextFrame(()=>{var j;return(j=l.buttonRef.current)==null?void 0:j.focus({preventScroll:!0})});break;case N.Tab:d.preventDefault(),d.stopPropagation(),c({type:1}),G().nextFrame(()=>{ft(l.buttonRef.current,d.shiftKey?Ne.Previous:Ne.Next)});break;default:d.key.length===1&&(c({type:3,value:d.key}),b.setTimeout(()=>c({type:4}),350));break}}),g=C(d=>{switch(d.key){case N.Space:d.preventDefault();break}}),f=s.useMemo(()=>({open:l.menuState===0}),[l]),S={"aria-activedescendant":l.activeItemIndex===null||(r=l.items[l.activeItemIndex])==null?void 0:r.id,"aria-labelledby":(n=l.buttonRef.current)==null?void 0:n.id,id:a,onKeyDown:v,onKeyUp:g,role:"menu",tabIndex:0,ref:m};return L({ourProps:S,theirProps:u,slot:f,defaultTag:tr,features:rr,visible:h,name:"Menu.Items"})}let ar=s.Fragment;function sr(e,t){let r=ee(),{id:n=`headlessui-menu-item-${r}`,disabled:i=!1,...a}=e,[u,l]=se("Menu.Item"),c=u.activeItemIndex!==null?u.items[u.activeItemIndex].id===n:!1,m=s.useRef(null),p=A(t,m);M(()=>{if(u.__demoMode||u.menuState!==0||!c||u.activationTrigger===0)return;let j=G();return j.requestAnimationFrame(()=>{var T,O;(O=(T=m.current)==null?void 0:T.scrollIntoView)==null||O.call(T,{block:"nearest"})}),j.dispose},[u.__demoMode,m,c,u.menuState,u.activationTrigger,u.activeItemIndex]);let b=qt(m),x=s.useRef({disabled:i,domRef:m,get textValue(){return b()}});M(()=>{x.current.disabled=i},[x,i]),M(()=>(l({type:5,id:n,dataRef:x}),()=>l({type:6,id:n})),[x,n]);let h=C(()=>{l({type:1})}),v=C(j=>{if(i)return j.preventDefault();l({type:1}),Be(u.buttonRef.current)}),g=C(()=>{if(i)return l({type:2,focus:F.Nothing});l({type:2,focus:F.Specific,id:n})}),f=jt(),S=C(j=>f.update(j)),d=C(j=>{f.wasMoved(j)&&(i||c||l({type:2,focus:F.Specific,id:n,trigger:0}))}),y=C(j=>{f.wasMoved(j)&&(i||c&&l({type:2,focus:F.Nothing}))}),R=s.useMemo(()=>({active:c,disabled:i,close:h}),[c,i,h]);return L({ourProps:{id:n,ref:p,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,disabled:void 0,onClick:v,onFocus:g,onPointerEnter:S,onMouseEnter:S,onPointerMove:d,onMouseMove:d,onPointerLeave:y,onMouseLeave:y},theirProps:a,slot:R,defaultTag:ar,name:"Menu.Item"})}let lr=$(Jt),ir=$(er),or=$(nr),ur=$(sr),_=Object.assign(lr,{Button:ir,Items:or,Item:ur});function cr(e=0){let[t,r]=s.useState(e),n=he(),i=s.useCallback(c=>{n.current&&r(m=>m|c)},[t,n]),a=s.useCallback(c=>!!(t&c),[t]),u=s.useCallback(c=>{n.current&&r(m=>m&~c)},[r,n]),l=s.useCallback(c=>{n.current&&r(m=>m^c)},[r]);return{flags:t,addFlag:i,hasFlag:a,removeFlag:u,toggleFlag:l}}function dr(e){let t={called:!1};return(...r)=>{if(!t.called)return t.called=!0,e(...r)}}function fe(e,...t){e&&t.length>0&&e.classList.add(...t)}function pe(e,...t){e&&t.length>0&&e.classList.remove(...t)}function mr(e,t){let r=G();if(!e)return r.dispose;let{transitionDuration:n,transitionDelay:i}=getComputedStyle(e),[a,u]=[n,i].map(c=>{let[m=0]=c.split(",").filter(Boolean).map(p=>p.includes("ms")?parseFloat(p):parseFloat(p)*1e3).sort((p,b)=>b-p);return m}),l=a+u;if(l!==0){r.group(m=>{m.setTimeout(()=>{t(),m.dispose()},l),m.addEventListener(e,"transitionrun",p=>{p.target===p.currentTarget&&m.dispose()})});let c=r.addEventListener(e,"transitionend",m=>{m.target===m.currentTarget&&(t(),c())})}else t();return r.add(()=>t()),r.dispose}function fr(e,t,r,n){let i=r?"enter":"leave",a=G(),u=n!==void 0?dr(n):()=>{};i==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let l=D(i,{enter:()=>t.enter,leave:()=>t.leave}),c=D(i,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),m=D(i,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return pe(e,...t.base,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),fe(e,...t.base,...l,...m),a.nextFrame(()=>{pe(e,...t.base,...l,...m),fe(e,...t.base,...l,...c),mr(e,()=>(pe(e,...t.base,...l),fe(e,...t.base,...t.entered),u()))}),a.dispose}function pr({immediate:e,container:t,direction:r,classes:n,onStart:i,onStop:a}){let u=he(),l=ae(),c=J(r);M(()=>{e&&(c.current="enter")},[e]),M(()=>{let m=G();l.add(m.dispose);let p=t.current;if(p&&c.current!=="idle"&&u.current)return m.dispose(),i.current(c.current),m.add(fr(p,n.current,c.current==="enter",()=>{m.dispose(),a.current(c.current)})),m.dispose},[r])}function U(e=""){return e.split(/\s+/).filter(t=>t.length>1)}let le=s.createContext(null);le.displayName="TransitionContext";var vr=(e=>(e.Visible="visible",e.Hidden="hidden",e))(vr||{});function gr(){let e=s.useContext(le);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function xr(){let e=s.useContext(ie);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let ie=s.createContext(null);ie.displayName="NestingContext";function oe(e){return"children"in e?oe(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function ze(e,t){let r=J(e),n=s.useRef([]),i=he(),a=ae(),u=C((h,v=z.Hidden)=>{let g=n.current.findIndex(({el:f})=>f===h);g!==-1&&(D(v,{[z.Unmount](){n.current.splice(g,1)},[z.Hidden](){n.current[g].state="hidden"}}),a.microTask(()=>{var f;!oe(n)&&i.current&&((f=r.current)==null||f.call(r))}))}),l=C(h=>{let v=n.current.find(({el:g})=>g===h);return v?v.state!=="visible"&&(v.state="visible"):n.current.push({el:h,state:"visible"}),()=>u(h,z.Unmount)}),c=s.useRef([]),m=s.useRef(Promise.resolve()),p=s.useRef({enter:[],leave:[],idle:[]}),b=C((h,v,g)=>{c.current.splice(0),t&&(t.chains.current[v]=t.chains.current[v].filter(([f])=>f!==h)),t==null||t.chains.current[v].push([h,new Promise(f=>{c.current.push(f)})]),t==null||t.chains.current[v].push([h,new Promise(f=>{Promise.all(p.current[v].map(([S,d])=>d)).then(()=>f())})]),v==="enter"?m.current=m.current.then(()=>t==null?void 0:t.wait.current).then(()=>g(v)):g(v)}),x=C((h,v,g)=>{Promise.all(p.current[v].splice(0).map(([f,S])=>S)).then(()=>{var f;(f=c.current.shift())==null||f()}).then(()=>g(v))});return s.useMemo(()=>({children:n,register:l,unregister:u,onStart:b,onStop:x,wait:m,chains:p}),[l,u,n,b,x,p,m])}function hr(){}let br=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function $e(e){var t;let r={};for(let n of br)r[n]=(t=e[n])!=null?t:hr;return r}function yr(e){let t=s.useRef($e(e));return s.useEffect(()=>{t.current=$e(e)},[e]),t}let Ir="div",Ve=Z.RenderStrategy;function Cr(e,t){var r,n;let{beforeEnter:i,afterEnter:a,beforeLeave:u,afterLeave:l,enter:c,enterFrom:m,enterTo:p,entered:b,leave:x,leaveFrom:h,leaveTo:v,...g}=e,f=s.useRef(null),S=A(f,t),d=(r=g.unmount)==null||r?z.Unmount:z.Hidden,{show:y,appear:R,initial:j}=gr(),[T,O]=s.useState(y?"visible":"hidden"),X=xr(),{register:V,unregister:q}=X;s.useEffect(()=>V(f),[V,f]),s.useEffect(()=>{if(d===z.Hidden&&f.current){if(y&&T!=="visible"){O("visible");return}return D(T,{hidden:()=>q(f),visible:()=>V(f)})}},[T,f,V,q,y,d]);let W=J({base:U(g.className),enter:U(c),enterFrom:U(m),enterTo:U(p),entered:U(b),leave:U(x),leaveFrom:U(h),leaveTo:U(v)}),w=yr({beforeEnter:i,afterEnter:a,beforeLeave:u,afterLeave:l}),E=Ue();s.useEffect(()=>{if(E&&T==="visible"&&f.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[f,T,E]);let I=j&&!R,je=R&&y&&j,Ke=!E||I?"idle":y?"enter":"leave",Y=cr(0),Qe=C(B=>D(B,{enter:()=>{Y.addFlag(k.Opening),w.current.beforeEnter()},leave:()=>{Y.addFlag(k.Closing),w.current.beforeLeave()},idle:()=>{}})),Ge=C(B=>D(B,{enter:()=>{Y.removeFlag(k.Opening),w.current.afterEnter()},leave:()=>{Y.removeFlag(k.Closing),w.current.afterLeave()},idle:()=>{}})),te=ze(()=>{O("hidden"),q(f)},X),ue=s.useRef(!1);pr({immediate:je,container:f,classes:W,direction:Ke,onStart:J(B=>{ue.current=!0,te.onStart(f,B,Qe)}),onStop:J(B=>{ue.current=!1,te.onStop(f,B,Ge),B==="leave"&&!oe(te)&&(O("hidden"),q(f))})});let K=g,Xe={ref:S};return je?K={...K,className:Se(g.className,...W.current.enter,...W.current.enterFrom)}:ue.current&&(K.className=Se(g.className,(n=f.current)==null?void 0:n.className),K.className===""&&delete K.className),P.createElement(ie.Provider,{value:te},P.createElement(xe,{value:D(T,{visible:k.Open,hidden:k.Closed})|Y.flags},L({ourProps:Xe,theirProps:K,defaultTag:Ir,features:Ve,visible:T==="visible",name:"Transition.Child"})))}function wr(e,t){let{show:r,appear:n=!1,unmount:i=!0,...a}=e,u=s.useRef(null),l=A(u,t);Ue();let c=ne();if(r===void 0&&c!==null&&(r=(c&k.Open)===k.Open),![!0,!1].includes(r))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[m,p]=s.useState(r?"visible":"hidden"),b=ze(()=>{p("hidden")}),[x,h]=s.useState(!0),v=s.useRef([r]);M(()=>{x!==!1&&v.current[v.current.length-1]!==r&&(v.current.push(r),h(!1))},[v,r]);let g=s.useMemo(()=>({show:r,appear:n,initial:x}),[r,n,x]);s.useEffect(()=>{if(r)p("visible");else if(!oe(b))p("hidden");else{let y=u.current;if(!y)return;let R=y.getBoundingClientRect();R.x===0&&R.y===0&&R.width===0&&R.height===0&&p("hidden")}},[r,b]);let f={unmount:i},S=C(()=>{var y;x&&h(!1),(y=e.beforeEnter)==null||y.call(e)}),d=C(()=>{var y;x&&h(!1),(y=e.beforeLeave)==null||y.call(e)});return P.createElement(ie.Provider,{value:b},P.createElement(le.Provider,{value:g},L({ourProps:{...f,as:s.Fragment,children:P.createElement(qe,{ref:l,...f,...a,beforeEnter:S,beforeLeave:d})},theirProps:{},defaultTag:s.Fragment,features:Ve,visible:m==="visible",name:"Transition"})))}function jr(e,t){let r=s.useContext(le)!==null,n=ne()!==null;return P.createElement(P.Fragment,null,!r&&n?P.createElement(ge,{ref:t,...e}):P.createElement(qe,{ref:t,...e}))}let ge=$(wr),qe=$(Cr),Nr=$(jr),Sr=Object.assign(ge,{Child:Nr,Root:ge});function re(e){e.preventDefault()}const ve=({...e})=>{const[t,r]=s.useState(!1),n=()=>{r(!t)};return o.jsxs("div",{className:"z-40 mt-8 flex justify-between flex-auto flex-wrap",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex justify-start items-center gap-2 text-gray-600 dark:text-gray-400 text-lg",children:[o.jsx(H,{icon:We}),o.jsxs("div",{className:"font-bold tracking-wide text-sm "+(e.required&&e.value==""?"text-red-400":""),children:[e.labelText,e.required?" *":""]})]})}),o.jsxs("div",{className:"mt-1 flex justify-between w-[100%]",children:[o.jsx("input",{autoFocus:!!e.hasFocus,type:"textarea",name:"contrasena",id:"password",value:e.value,onChange:i=>e.setContrasena(i.target.value),autoComplete:"off",required:e.required,onCopy:re,onCut:re,onPaste:re,onDragStart:re,style:{fontFamily:t?"inherit":"password"},className:"pl-2 w-[95%] text-md py-2 border-b border-gray-300 focus:outline-none focus:border-indigo-500 "+e.inputAddCss}),o.jsx("div",{className:"my-auto text-gray-600 mt-2 ml-4",children:o.jsx(H,{icon:t?Ye:Je,onClick:n,className:"cursor-pointer",title:"ver/ocultar campo"})})]})]})},Er=async(e,t,r,n)=>{try{return(await yt.patch(`${Ze}/api/Usuarios/${e}/CambiarContrasena`,{ContrasenaActual:t,ContrasenaNueva:r},{headers:{accept:"text/plain","Content-Type":"application/json",Authorization:n,Permiso:"Usuarios_Actualizar"}})).data}catch(i){return i.response}},Me=[{name:"Inicio",href:"/administracion/inicio",permiso:"Menu_Administracion"},{name:"Clientes",href:"/administracion/clientes",permiso:"Menu_Administracion_Clientes"},{name:"Boletas",href:"/administracion/boletas",permiso:"Menu_Administracion_Boletas"},{name:"Usuarios",href:"/administracion/usuarios",permiso:"Menu_Administracion_Usuarios"}];function kr(){const{showDialog:e}=et(w=>w),[t,r]=s.useState(!1),n=ke(w=>w.permisos),i=w=>n.findIndex(E=>E==w)>0,a=Me.filter(w=>i(w.permiso));s.useEffect(()=>(e==!1&&r(!1),()=>{h(""),g(""),S("")}),[e]);const{managementVisited:u,setManagementVisited:l}=bt(w=>({managementVisited:w.managementVisited,setManagementVisited:w.setManagementVisited})),c=tt(),m=rt(),p=s.useRef(null),b=ke(w=>w),[x,h]=s.useState(""),[v,g]=s.useState(""),[f,S]=s.useState(""),[d,y]=s.useState(""),[R,j]=s.useState(!0),[T,O]=s.useState({data:0,status:500,errors:[""]}),X=w=>{l(w),p.current!==null&&p.current.click()},V=()=>{m("/")},q=()=>{r(!0)},W=async()=>{var w;try{const E=await Er(b.alias,x,v,b.token);return O(E),console.log(E),E.status===!0?"":E.data!=""&&E.data!=null&&!((w=E.data)!=null&&w.errors)?E.data:Ct(E)}catch(E){return console.error("Error setting new password:",E),"Error setting new password"}};return s.useEffect(()=>(v!=""&&f!=""&&(v==f?y("true"):y("false")),()=>{}),[v,f]),s.useEffect(()=>{x!=""&&v!=""&&f!=""&&v.length>=6&&v==f?j(!1):j(!0)},[x,v,f]),o.jsxs(o.Fragment,{children:[o.jsx(de,{as:"nav",className:"bg-gray-800 w-full h-16 relative z-40",children:({open:w})=>{var E;return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"relative flex h-16 items-center justify-between",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center sm:hidden z-40",children:o.jsxs(de.Button,{ref:p,className:"relative inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:outline-none ",children:[o.jsx("span",{className:"absolute -inset-0.5"}),o.jsx("span",{className:"sr-only",children:"Open main menu"}),w?o.jsx(vt,{className:"block h-6 w-6","aria-hidden":"true"}):o.jsx(gt,{className:"block h-6 w-6","aria-hidden":"true"})]})}),o.jsxs("div",{className:"flex flex-1 items-center justify-center sm:items-stretch sm:justify-start",children:[o.jsx("div",{className:"flex flex-shrink-0 items-center",children:o.jsx("a",{onClick:()=>{V()},className:"cursor-pointer",children:o.jsx(ht,{className:"size-10",fill:"#4F46E5"})})}),o.jsx("div",{className:"hidden sm:ml-6 sm:block",children:o.jsx("div",{className:"flex space-x-4",children:a.map(I=>o.jsx(ce,{to:I.href,className:Q(I.href===u?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white","rounded-md px-3 py-2 text-sm font-medium cursor-pointer"),onClick:()=>X(I.href),"aria-current":c.pathname===I.href?"page":void 0,children:I.name},I.name))})})]}),o.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0",children:o.jsxs(_,{as:"div",className:"relative ml-3",children:[o.jsx("div",{children:o.jsxs(_.Button,{className:"relative flex rounded-full bg-gray-800 text-sm cursor-pointer hover:text-amber-300",children:[o.jsx("span",{className:"absolute -inset-1.5"}),o.jsx("span",{className:"sr-only",children:"Open user menu"}),o.jsx("div",{className:"text-3xl text-gray-500 hover:text-gray-300",children:Ee.find(I=>I.alias==b.alias)?o.jsx("img",{src:((E=Ee.find(I=>I.alias==b.alias))==null?void 0:E.imageUrl)+"",className:"rounded-full size-10 border-gray-700 border-2"}):o.jsx(H,{icon:nt,className:"w-full"})})]})}),o.jsx(Sr,{as:s.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:o.jsxs(_.Items,{className:"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white dark:bg-gray-800 py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:[o.jsx(_.Item,{children:({active:I})=>o.jsxs("a",{className:Q("","block px-4 py-2 text-sm text-gray-400 dark:text-gray-600 cursor-default"),children:[o.jsx(H,{icon:at}),o.jsx("span",{className:"ml-3",children:b.nombre})]})}),o.jsx("div",{className:"flex flex-auto mx-auto w-full justify-center",children:o.jsx("hr",{className:"text-gray-300 dark:text-gray-600 w-[80%] mb-2 mt-2 text-center justify-center"})}),o.jsx(_.Item,{children:({active:I})=>o.jsxs(ce,{to:"/",className:Q(I?"bg-gray-100 dark:bg-gray-800":"","block px-4 py-2 text-sm text-gray-700 dark:text-gray-400 cursor-pointer hover:text-indigo-600"),children:[o.jsx(H,{icon:st}),o.jsx("span",{className:"ml-3",children:"Página principal"})]})}),o.jsx("div",{className:"flex flex-auto mx-auto w-full justify-center",children:o.jsx("hr",{className:"text-gray-300 dark:text-gray-600 w-[80%] mb-2 mt-2 text-center justify-center"})}),o.jsx(_.Item,{children:({active:I})=>o.jsxs("a",{onClick:()=>q(),className:Q(I?"bg-gray-100 dark:bg-gray-800":"","block px-4 py-2 text-sm text-gray-700 dark:text-gray-400 cursor-pointer hover:text-indigo-600"),children:[o.jsx(H,{icon:lt}),o.jsx("span",{className:"ml-3",children:"Cambiar contraseña"})]})}),o.jsx(_.Item,{children:({active:I})=>o.jsxs("a",{className:Q(I?"bg-gray-100 dark:bg-gray-800":"","block px-4 py-2 text-sm text-gray-700 dark:text-gray-400 cursor-pointer hover:text-red-600 dark:hover:text-red-400"),onClick:xt(m),children:[o.jsx(H,{icon:it}),o.jsx("span",{className:"ml-3",children:"Cerrar sesión"})]})})]})})]})})]})}),o.jsx(de.Panel,{className:"sm:hidden",children:o.jsx("div",{className:"space-y-1 px-2 pb-3 pt-2 z-40 bg-gray-800",children:Me.map(I=>o.jsx(ce,{to:I.href,className:Q(I.href===u?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white","block rounded-md px-3 py-2 text-base font-medium cursor-pointer"),onClick:()=>{X(I.href)},"aria-current":c.pathname===I.href?"page":void 0,children:I.name},I.name))})})]})}}),t?o.jsx(It,{status:t,titulo:"Cambiar contraseña",mensajeToast:T.errors&&(T.errors.join(", ")||""),onAccept:W,hasErrors:R,children:o.jsxs("div",{className:"max-w-sm h-80 z-40",children:[o.jsx("h3",{className:"text-justify",children:"Crea una contraseña segura y fácil de recordar. Debes incluir 6 caracteres con al menos un número y un caracter especial."}),o.jsxs("div",{className:"w-full h-full",children:[o.jsx(ve,{hasFocus:!0,labelText:"Contraseña actual",value:x,inputAddCss:"",setContrasena:h,required:!0},"p1"),o.jsx(ve,{hasFocus:!1,labelText:"Nueva contraseña",value:v,inputAddCss:d!=""?d=="true"?"text-green-600":"text-red-600":"",setContrasena:g,required:!0},"p2"),o.jsx(ve,{hasFocus:!1,labelText:"Confirma la nueva contraseña",value:f,inputAddCss:d!=""?d=="true"?"text-green-600":"text-red-600":"",setContrasena:S,required:!0},"p3"),o.jsx("div",{className:"h-10"})]})]})},2):null]})}const Ur=({children:e})=>{const t=wt;return o.jsxs("div",{className:"min-h-screen flex flex-col w-screen relative",children:[o.jsx("div",{className:"fixed w-full shadow-md z-40",children:o.jsx(kr,{})}),o.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat z-10 opacity-5",style:{backgroundImage:`url(${t})`}}),o.jsx("div",{className:"grow flex justify-center items-center w-full z-20",children:o.jsx("div",{className:"w-full py-10 mt-16 pl-10 pr-10",children:e})})]})};export{Ur as default};
