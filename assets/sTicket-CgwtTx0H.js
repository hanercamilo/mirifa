import{c as i,A as c,k as s,R as d,I as n}from"./index-C-U8uR4l.js";import{G as l,a as p}from"./axios-U3mhuuG9.js";const u=()=>new Promise((a,t)=>{const e=document.createElement("script");e.src=`${d}?render=${n}`,e.async=!0,e.onload=()=>{const r=setInterval(()=>{window.grecaptcha&&window.grecaptcha.enterprise&&typeof window.grecaptcha.enterprise.execute=="function"&&(clearInterval(r),window.grecaptcha.enterprise.execute(n,{action:"api/boletas"}).then(a).catch(t))},200);setTimeout(()=>{clearInterval(r),t(new Error("Timeout: grecaptcha no está disponible."))},1e4)},e.onerror=()=>t(new Error("Error al cargar el script de reCAPTCHA")),document.body.appendChild(e)}),w=i((a,t)=>({isLoadingTickets:!1,tickets:[],fetchTicketData:async()=>{a({isLoadingTickets:!0});try{l("hidden");const e=await u(),r=await p.post(`${c}/api/Boletas`,{Token:e});if(r.status===200){const o=r.data.data.boletas;a({tickets:o}),t(),s.success(`${o.length} Boletas consultadas exitosamente.`,{duration:4e3})}else s.error("Error en la solicitud, informa al administrador por favor.")}catch(e){e.response?s.error(e.response.data.errors.join(", ")):s.warning("Error al obtener la información de las boletas. Por favor, intenta nuevamente más tarde."+e.message)}finally{a({isLoadingTickets:!1})}},setIsLoadingTickets:async e=>{a({isLoadingTickets:e})},cleanTickets:async()=>{a({tickets:[]})},reloadStats:async()=>{await t().fetchTicketData()}}));export{w as u};
